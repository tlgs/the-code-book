root = .
module_name = codebook

rule pdoc
  command = pdoc --no-search -o $root/docs $module_name
build _docs: pdoc
build docs: phony _docs

rule cov-run
  command = coverage run --branch --source=$root/$module_name -m pytest -v
  pool = console
build _test: cov-run
build test: phony _test

rule cov-report
  command = coverage report -m
build _report: cov-report
build report: phony _report

default docs
